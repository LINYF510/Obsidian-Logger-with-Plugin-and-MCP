# 文档管理规范

**版本**: v1.0  
**更新日期**: 2025-11-05

---

## 📋 核心规则

### 规则 1：统一存放（最高优先级）

**所有新建的文档必须放在 `docs/` 目录下，并按类型分类。**

### 规则 2：强制同步（每次都要执行）

**创建、修改或删除任何文件时，必须立即更新相关文档。**

### 规则 3：添加说明（必须遵守）

**在目录结构中添加中文简短说明，一句话概括文件用途。**

---

## 📂 文档分类目录

### docs/architecture/
存放架构和设计文档
- 系统架构设计
- 数据流设计
- 模块交互设计

**示例**：
- `Auto-Reload架构设计.md` - Auto-Reload 模块的完整架构设计

### docs/api/
存放 API 参考文档
- MCP 工具 API
- 插件 API
- 接口文档

**示例**：
- `MCP-Tools-API.md` - MCP Server 12个工具的完整 API 文档

### docs/guides/
存放使用指南
- 快速开始指南
- 配置指南
- 故障排查指南

**示例**：
- `uvx安装指南.md` - 使用 uvx 安装 MCP Server 的指南
- `快速测试指南-阶段二.md` - 阶段二功能的快速测试方法

### docs/development/
存放开发相关文档
- 开发计划
- 贡献指南
- 编码规范
- 文档管理规范（本文件）

**示例**：
- `DEVELOPMENT_PLAN.md` - 完整的开发计划和时间规划
- `文档查询建议.md` - 开发时如何查阅文档的指南

### docs/testing/
存放测试相关文档
- 测试策略
- 测试用例
- 测试报告

**示例**：
- `单元测试指南.md` - 如何编写和运行单元测试
- `Auto-Reload故障排查.md` - Auto-Reload 模块的常见问题排查

### docs/misc/
存放其他临时文档
- 会议记录
- 临时笔记
- 待整理文档

**示例**：
- `CI-CD修复总结.md` - CI/CD 问题修复的总结
- `MCP功能开关说明.md` - MCP 功能开关的说明文档

---

## 📝 文档创建流程

### 流程图

```
需要创建新文档
    ↓
【步骤1】确定文档类型
    ├─ 架构设计 → docs/architecture/
    ├─ API 文档 → docs/api/
    ├─ 使用指南 → docs/guides/
    ├─ 开发文档 → docs/development/
    ├─ 测试文档 → docs/testing/
    └─ 其他 → docs/misc/
    ↓
【步骤2】创建文件
    ├─ 使用清晰的文件名（中文或英文）
    ├─ 添加文档头部信息（版本、日期、作者）
    └─ 编写文档内容
    ↓
【步骤3】更新相关索引
    ├─ 如果是重要文档，在 README.md 中添加链接
    ├─ 在文档查询建议中添加引用
    └─ 确保文档可被搜索到
    ↓
【完成】提交代码
```

### 示例

**场景**：需要创建一个关于设置界面的使用指南

```bash
# 1. 确定类型 → 使用指南
# 2. 创建文件
touch docs/guides/设置界面使用指南.md

# 3. 编写内容
# （按照文档模板编写）

# 4. 提交
git add docs/guides/设置界面使用指南.md
git commit -m "docs: 添加设置界面使用指南"
```

---

## 📄 文档模板

### 通用文档头部

```markdown
# 文档标题

**版本**: v1.0  
**最后更新**: YYYY-MM-DD  
**作者**: 作者名  

---

## 目录

1. [章节1](#章节1)
2. [章节2](#章节2)
...

---

## 正文内容

...

---

**文档版本**: v1.0  
**最后更新**: YYYY-MM-DD  
**维护者**: 维护者名
```

### 架构设计文档模板

```markdown
# [模块名] 架构设计文档

**版本**: v1.0  
**最后更新**: YYYY-MM-DD  
**作者**: 作者名

---

## 一、架构概述

### 1.1 项目背景
### 1.2 设计目标
### 1.3 系统架构图

---

## 二、核心模块设计

### 2.1 模块 A
### 2.2 模块 B

---

## 三、技术实现细节

...

---

## 四、性能优化

...

---

**文档版本**: v1.0  
**维护者**: 维护者名
```

### API 文档模板

```markdown
# [模块名] API 文档

**版本**: v1.0  
**最后更新**: YYYY-MM-DD

---

## 工具列表

| 工具名 | 功能描述 | 参数 | 返回值 |
|--------|---------|------|--------|
| tool1  | 描述    | 参数 | 返回  |

---

## 详细说明

### tool1

**功能描述**: ...

**参数**:
- `param1` (string): 描述
- `param2` (int, 可选): 描述

**返回值**:
```json
{
  "status": "success",
  "data": "..."
}
```

**示例**:
```bash
tool1 param1="value" param2=10
```

---

**文档版本**: v1.0  
**维护者**: 维护者名
```

---

## 🔄 文档更新规则

### 何时需要更新文档？

| 代码变更类型 | 需要更新的文档 | 优先级 |
|-------------|--------------|--------|
| 添加新功能 | 功能文档、API 文档、README | 🔴 高 |
| 修改现有功能 | 相关功能文档 | 🟡 中 |
| 修复 Bug | 可选（重大 Bug 需更新） | 🟢 低 |
| 重构代码 | 架构文档（如有重大变化） | 🟡 中 |
| 添加/删除文件 | 目录结构文档 | 🔴 高 |
| 修改配置 | 配置文档、README | 🟡 中 |

### 更新文档的步骤

```
1. 确认需要更新的文档
   ↓
2. 更新文档内容
   ├─ 修改相关章节
   ├─ 更新版本号和日期
   └─ 添加变更说明（如需要）
   ↓
3. 检查文档质量
   ├─ 内容是否准确
   ├─ 格式是否规范
   └─ 链接是否有效
   ↓
4. 提交变更
   git commit -m "docs: 更新xxx文档"
```

---

## ✅ 文档质量检查清单

### 内容检查

- [ ] 标题清晰准确
- [ ] 内容完整无遗漏
- [ ] 技术描述准确
- [ ] 示例代码可运行
- [ ] 术语使用一致
- [ ] 无错别字

### 格式检查

- [ ] 有文档头部信息
- [ ] 有目录（长文档）
- [ ] Markdown 格式正确
- [ ] 代码块有语言标注
- [ ] 表格格式整齐
- [ ] 链接有效

### 可维护性检查

- [ ] 版本号清晰
- [ ] 更新日期准确
- [ ] 有维护者信息
- [ ] 文档分类合理
- [ ] 易于查找和搜索

---

## 🎯 文档命名规范

### 中文文档命名

**格式**：`[类型]-[主题].md` 或 直接使用中文

**示例**：
- ✅ `设置界面使用指南.md`
- ✅ `Auto-Reload架构设计.md`
- ✅ `单元测试指南.md`

### 英文文档命名

**格式**：`[TYPE]_[SUBJECT].md` 或 使用连字符

**示例**：
- ✅ `MCP-Tools-API.md`
- ✅ `DEVELOPMENT_PLAN.md`
- ✅ `README.md`

### 避免的命名方式

**❌ 不推荐**：
- `文档1.md` - 名称不明确
- `temp.md` - 太临时
- `新建文档.md` - 没有实际含义
- `doc-20231101-final-v2-new.md` - 过于冗长

---

## 📊 文档类型对应表

| 文档类型 | 存放位置 | 命名示例 | 用途 |
|---------|---------|---------|------|
| 架构设计 | `docs/architecture/` | `模块名架构设计.md` | 描述模块架构 |
| API 参考 | `docs/api/` | `模块名-API.md` | API 接口文档 |
| 使用指南 | `docs/guides/` | `功能使用指南.md` | 用户指南 |
| 开发计划 | `docs/development/` | `DEVELOPMENT_PLAN.md` | 开发规划 |
| 测试文档 | `docs/testing/` | `测试类型指南.md` | 测试相关 |
| 会议记录 | `docs/misc/` | `会议记录-YYYYMMDD.md` | 临时记录 |

---

## 🔗 文档链接管理

### 内部链接

**使用相对路径**：

```markdown
[开发计划](./development/DEVELOPMENT_PLAN.md)
[API 文档](../api/MCP-Tools-API.md)
[主文档](../../README.md)
```

### 外部链接

**使用完整 URL**：

```markdown
[Obsidian 官方文档](https://docs.obsidian.md/)
[TypeScript 文档](https://www.typescriptlang.org/)
```

### 跨文档引用

**使用 @docs 前缀**（在代码和讨论中）：

```
参考 @docs/architecture/Auto-Reload架构设计.md 第 3 节...
根据 @docs/development/DEVELOPMENT_PLAN.md 的规划...
```

---

## 💡 文档编写技巧

### 技巧 1：使用清晰的结构

```markdown
# 一级标题（文档主题）
## 二级标题（大章节）
### 三级标题（小节）
#### 四级标题（细节）
```

### 技巧 2：善用代码块

````markdown
```typescript
// TypeScript 代码示例
function example() {
  return "示例";
}
```
````

### 技巧 3：使用表格整理信息

```markdown
| 项目 | 说明 | 示例 |
|------|------|------|
| 项目1 | 说明1 | 示例1 |
| 项目2 | 说明2 | 示例2 |
```

### 技巧 4：添加视觉元素

```markdown
✅ 正确的做法
❌ 错误的做法
⚠️ 注意事项
💡 提示
🔧 工具
📝 文档
```

### 技巧 5：提供实际示例

**不好的文档**：
```
使用 tool1 可以完成任务。
```

**好的文档**：
```
使用 tool1 可以完成任务。

**示例**：
```bash
tool1 --param value
```

**输出**：
```
成功完成任务
```
```

---

## 🚫 文档编写禁忌

### 禁忌 1：不写文档

**❌ 错误**：添加新功能但不写文档

**✅ 正确**：添加功能的同时更新相关文档

### 禁忌 2：文档过时

**❌ 错误**：代码已更新，文档还是旧版本

**✅ 正确**：代码和文档同步更新

### 禁忌 3：描述模糊

**❌ 错误**：
```
这个函数处理数据。
```

**✅ 正确**：
```
这个函数接收日志数据，过滤错误级别的日志，
并返回过滤后的数组。

参数：logs (string[]) - 日志数组
返回：string[] - 错误级别的日志
```

### 禁忌 4：缺少示例

**❌ 错误**：只有 API 签名，没有使用示例

**✅ 正确**：提供完整的使用示例和预期输出

---

## 📈 文档维护流程

### 定期检查（每月）

```
每月第一周进行文档检查：
1. 检查文档是否过时
2. 更新过时的内容
3. 修复失效的链接
4. 补充缺失的文档
5. 整理临时文档（docs/misc/）
```

### 版本更新（每次发布）

```
发布新版本时：
1. 更新 CHANGELOG.md
2. 更新 README.md 中的版本号
3. 检查所有文档的准确性
4. 创建发布说明文档
```

---

## 📚 参考资源

### Markdown 规范

- [GitHub Flavored Markdown](https://github.github.com/gfm/)
- [Markdown Guide](https://www.markdownguide.org/)

### 技术写作

- [Google Developer Documentation Style Guide](https://developers.google.com/style)
- [Microsoft Writing Style Guide](https://docs.microsoft.com/en-us/style-guide/welcome/)

---

## ✅ 检查清单

### 创建新文档前

- [ ] 确认文档类型和存放位置
- [ ] 检查是否已有类似文档（避免重复）
- [ ] 准备好文档内容大纲

### 编写文档时

- [ ] 使用文档模板
- [ ] 添加清晰的标题和目录
- [ ] 提供代码示例
- [ ] 添加必要的图表说明

### 完成文档后

- [ ] 检查内容准确性
- [ ] 检查格式规范性
- [ ] 检查链接有效性
- [ ] 更新相关索引
- [ ] 提交代码

---

**文档版本**: v1.0  
**最后更新**: 2025-11-05  
**维护者**: LINYF510

💡 **提示**：好的文档是项目成功的关键。请认真遵守文档管理规范，让文档成为团队的宝贵资产！
